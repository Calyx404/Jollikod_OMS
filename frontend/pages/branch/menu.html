<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Find your Cravings!</title>

    <link rel="stylesheet" href="../../assets/css/pages/branch/menu.css" />

    <script src="../../assets/js/components/layer.js" defer></script>
  </head>
  <body class="branch">
    <main class="page">
      <header class="header header-page">
        <div class="context">
          <h1>
            <a onclick="parent.navigate(event, '../pages/home/home.html')"
              >Menu</a
            >
          </h1>
        </div>
        <div class="actions right">
          <button
            class="btn btn-primary layer-open"
            data-layer-target="add-item"
          >
            <span class="btn-label">Add Item</span>
            <i class="bx bxs-user-plus btn-icon"></i>
          </button>
        </div>
      </header>

      <main class="main-container main-scrollable">
        <main class="main">
          <!-- ⭐ TABS INSIDE THE WHITE BOX ⭐ -->
          <div class="tabs-container">
            <div class="tab active" data-tab="tab1">Inventory</div>
            <div class="tab" data-tab="tab2">Item Rankings</div>
            <div class="tab" data-tab="tab3">Logs</div>
          </div>

          <!-- ⭐ TAB CONTENT INSIDE THE WHITE BOX ⭐ -->
          <div class="tab-content active" id="tab1">
            <!-- ⭐ KPI CARDS ⭐ -->
            <div class="kpi-container">
              <!-- TOTAL ITEMS -->
              <div class="kpi-card total-items">
                <div class="kpi-label">Total Items</div>

                <div class="kpi-row">
                  <div class="kpi-number">245</div>
                  <div class="kpi-icon"><i class="fas fa-boxes"></i></div>
                </div>
              </div>

              <!-- LOW STOCK -->
              <div class="kpi-card low-stock">
                <div class="kpi-label">Low Stock</div>

                <div class="kpi-row">
                  <div class="kpi-number">87</div>
                  <div class="kpi-icon">
                    <i class="fas fa-exclamation-triangle"></i>
                  </div>
                </div>
              </div>

              <!-- OUT OF STOCK -->
              <div class="kpi-card out-stock">
                <div class="kpi-label">Out of Stock</div>

                <div class="kpi-row">
                  <div class="kpi-number">14</div>
                  <div class="kpi-icon">
                    <i class="fas fa-times-circle"></i>
                  </div>
                </div>
              </div>
            </div>

            <!-- =============================
          INVENTORY LIST TABLE
      =============================== -->
            <div class="inventory-section">
              <div class="inventory-header">
                <h2>Inventory List</h2>

                <div style="display: flex; gap: 10px; align-items: center">
                  <!-- ADD MENU BUTTON -->
                  <button
                    class="btn btn-primary layer-open"
                    data-layer-target="add-item"
                  >
                    <span class="btn-label">Add Item</span>
                    <i class="bx bxs-user-plus btn-icon"></i>
                  </button>

                  <!-- EXISTING SORT DROPDOWN -->
                  <div class="custom-dropdown" id="filterDropdown">
                    <div class="custom-dropdown-toggle">
                      Sort By
                      <i class="fas fa-chevron-down"></i>
                    </div>
                    <ul class="custom-dropdown-menu">
                      <li data-sort="item">Item Name</li>
                      <li data-sort="category">Category</li>
                      <li data-sort="price">Price</li>
                      <li data-sort="stock">Stock</li>
                    </ul>
                  </div>
                </div>
              </div>

              <table class="inventory-table">
                <thead>
                  <tr>
                    <th>Item Name</th>
                    <th>Category</th>
                    <th>Price</th>
                    <th>Stock</th>
                    <th>Actions</th>
                  </tr>
                </thead>
                <tbody>
                  <!-- Sample row -->
                  <tr>
                    <td>Burger</td>
                    <td>Burgers</td>
                    <td>$5.00</td>
                    <td>
                      <span class="stock-number">5</span>
                      <i
                        class="fas fa-exclamation-triangle stock-icon low-stock-icon"
                      ></i>
                      <!-- Low stock icon -->
                    </td>
                    <td class="action-buttons">
                      <button class="minus">
                        <i class="fas fa-minus"></i>
                      </button>
                      <button class="plus"><i class="fas fa-plus"></i></button>
                      <button class="edit"><i class="fas fa-edit"></i></button>
                    </td>
                  </tr>

                  <tr>
                    <td>Sundae</td>
                    <td>Desserts</td>
                    <td>$2.00</td>
                    <td>
                      <span class="stock-number">342</span>
                    </td>
                    <td class="action-buttons">
                      <button class="minus">
                        <i class="fas fa-minus"></i>
                      </button>
                      <button class="plus"><i class="fas fa-plus"></i></button>
                      <button class="edit"><i class="fas fa-edit"></i></button>
                    </td>
                  </tr>

                  <tr>
                    <td>Fries</td>
                    <td>Snacks</td>
                    <td>$2.50</td>
                    <td>
                      <span class="stock-number">0</span>
                      <i
                        class="fas fa-times-circle stock-icon out-stock-icon"
                      ></i>
                      <!-- Out of stock icon -->
                    </td>
                    <td class="action-buttons">
                      <button class="minus">
                        <i class="fas fa-minus"></i>
                      </button>
                      <button class="plus"><i class="fas fa-plus"></i></button>
                      <button class="edit"><i class="fas fa-edit"></i></button>
                    </td>
                  </tr>
                </tbody>
              </table>
            </div>
          </div>
          <div class="tab-content" id="tab2">
            <div class="inventory-section">
              <div class="inventory-header">
                <h2>Item Rankings</h2>

                <!-- NEW FILTER TOGGLE (looks exactly like the old dropdown) -->
                <div
                  class="custom-dropdown-toggle filter-toggle"
                  id="rankingsFilterToggle"
                >
                  Units Sold • Last 30 Days
                  <i class="fas fa-chevron-down"></i>
                </div>
              </div>

              <!-- SAME TABLE AS BEFORE -->
              <table class="inventory-table">
                <thead>
                  <tr>
                    <th>Rank</th>
                    <th>Item Name</th>
                    <th>Category</th>
                    <th>Units Sold</th>
                    <th>Revenue</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td>1</td>
                    <td>Chickenjoy</td>
                    <td>Chicken</td>
                    <td>1,456</td>
                    <td>$11,648.00</td>
                  </tr>
                  <tr>
                    <td>2</td>
                    <td>Jolly Spaghetti</td>
                    <td>Pasta</td>
                    <td>1,203</td>
                    <td>$7,818.00</td>
                  </tr>
                  <tr>
                    <td>3</td>
                    <td>Yumburger</td>
                    <td>Burgers</td>
                    <td>987</td>
                    <td>$4,935.00</td>
                  </tr>
                  <tr>
                    <td>4</td>
                    <td>Crispy Fries</td>
                    <td>Snacks</td>
                    <td>865</td>
                    <td>$2,162.50</td>
                  </tr>
                  <tr>
                    <td>5</td>
                    <td>Peach Mango Pie</td>
                    <td>Desserts</td>
                    <td>742</td>
                    <td>$2,226.00</td>
                  </tr>
                  <tr>
                    <td>6</td>
                    <td>Jolly Hotdog</td>
                    <td>Snacks</td>
                    <td>689</td>
                    <td>$2,756.00</td>
                  </tr>
                  <tr>
                    <td>7</td>
                    <td>Tuna Pie</td>
                    <td>Desserts</td>
                    <td>612</td>
                    <td>$1,836.00</td>
                  </tr>
                  <tr>
                    <td>8</td>
                    <td>Burger Steak</td>
                    <td>Rice Meals</td>
                    <td>578</td>
                    <td>$3,468.00</td>
                  </tr>
                  <tr>
                    <td>9</td>
                    <td>Sundae</td>
                    <td>Desserts</td>
                    <td>534</td>
                    <td>$1,068.00</td>
                  </tr>
                  <tr>
                    <td>10</td>
                    <td>Coke Float</td>
                    <td>Drinks</td>
                    <td>498</td>
                    <td>$1,245.00</td>
                  </tr>
                </tbody>
              </table>
            </div>

            <!-- ====================== NEW FILTER MODAL ====================== -->
            <div
              class="filter-modal-backdrop"
              id="rankingsFilterBackdrop"
            ></div>

            <div class="filter-modal" id="rankingsFilterModal">
              <div class="modal-header">
                <h3>Sort & Filter</h3>
                <i class="fas fa-times close-modal"></i>
              </div>

              <div class="modal-body">
                <div class="filter-group">
                  <label for="sortBySelect">Sort By</label>
                  <select id="sortBySelect">
                    <option value="name">Item Name</option>
                    <option value="category">Category</option>
                    <option value="units" selected>Units Sold</option>
                    <option value="revenue">Revenue</option>
                  </select>
                </div>

                <div class="filter-group">
                  <label for="timePeriod">Time Period</label>
                  <select id="timePeriod">
                    <option value="24hrs">Last 24 Hours</option>
                    <option value="30days" selected>Last 30 Days</option>
                    <option value="year">This Year</option>
                    <option value="custom">Custom</option>
                  </select>
                </div>

                <div class="custom-range" id="customRange">
                  <div class="filter-group">
                    <label for="dateFrom">From</label>
                    <input type="date" id="dateFrom" />
                  </div>
                  <div class="filter-group">
                    <label for="dateTo">To</label>
                    <input type="date" id="dateTo" />
                  </div>
                </div>
              </div>

              <div class="modal-footer">
                <button type="button" class="cancel-btn" id="cancelFilter">
                  Cancel
                </button>
                <button type="button" id="applyFilter">Apply Filter</button>
              </div>
            </div>
          </div>

          <div class="tab-content" id="tab3">
            <div class="inventory-section">
              <div class="inventory-header">
                <h2>Action Logs</h2>

                <!-- FILTER DROPDOWN - EXACT SAME AS INVENTORY TAB -->
                <div class="custom-dropdown" id="logsFilterDropdown">
                  <div class="custom-dropdown-toggle">
                    Date (descending)
                    <i class="fas fa-chevron-down"></i>
                  </div>
                  <ul class="custom-dropdown-menu">
                    <li data-sort="name-asc">Name (ascending)</li>
                    <li data-sort="name-desc">Name (descending)</li>
                    <li data-sort="date-asc">Date (ascending)</li>
                    <li data-sort="date-desc" selected>Date (descending)</li>
                  </ul>
                </div>
              </div>

              <!-- LOGS TABLE - 100% SAME DESIGN AS INVENTORY TABLE -->
              <table class="inventory-table">
                <thead>
                  <tr>
                    <th>Date & Timestamp</th>
                    <th>Username</th>
                    <th>Description</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td>Nov 28, 2025 14:32:18</td>
                    <td>manager_baguio</td>
                    <td>Added 50 units of Chickenjoy</td>
                  </tr>
                  <tr>
                    <td>Nov 28, 2025 13:55:07</td>
                    <td>cashier01</td>
                    <td>Edited price of Jolly Spaghetti from $5.50 → $6.00</td>
                  </tr>
                  <tr>
                    <td>Nov 28, 2025 12:19:44</td>
                    <td>manager_baguio</td>
                    <td>Removed 1 unit of Crispy Fries (sold)</td>
                  </tr>
                  <tr>
                    <td>Nov 28, 2025 11:08:22</td>
                    <td>staff_janice</td>
                    <td>Restocked Peach Mango Pie (+120 units)</td>
                  </tr>
                  <tr>
                    <td>Nov 28, 2025 10:41:55</td>
                    <td>cashier02</td>
                    <td>Marked Fries as Out of Stock</td>
                  </tr>
                  <tr>
                    <td>Nov 27, 2025 18:25:33</td>
                    <td>manager_baguio</td>
                    <td>Deleted expired item "Holiday Ham"</td>
                  </tr>
                  <tr>
                    <td>Nov 27, 2025 16:12:09</td>
                    <td>staff_mark</td>
                    <td>Updated stock of Sundae (+80 units)</td>
                  </tr>
                  <tr>
                    <td>Nov 27, 2025 14:47:21</td>
                    <td>cashier01</td>
                    <td>Changed category of Tuna Pie to "Desserts"</td>
                  </tr>
                  <tr>
                    <td>Nov 27, 2025 09:03:15</td>
                    <td>manager_baguio</td>
                    <td>Logged in to branch dashboard</td>
                  </tr>
                </tbody>
              </table>
            </div>
          </div>
        </main>
      </main>
    </main>

    <aside class="layer" id="add-item">
      <header class="header header-page">
        <div class="actions left">
          <button class="btn btn-secondary layer-close" title="Close Panel">
            <i class="bx bxs-dock-right-arrow btn-icon"></i>
          </button>
        </div>
        <div class="context">
          <h1>Add Item</h1>
        </div>
        <div class="actions right">
          <button
            onclick="parent.navigate(event, '../pages/branch/activity.html')"
            class="btn btn-primary"
            title="Di ko na alam"
          >
            <i class="bx bxs-user-plus btn-icon"></i>
          </button>
        </div>
      </header>

      <main class="main-container main-scrollable">
        <main class="main">
          <div class="edit-panel" id="editPanel">
            <h2>Edit Menu Item</h2>
            <form id="editForm">
              <label for="editName">Item Name</label>
              <input type="text" id="editName" name="editName" required />

              <label for="editCategory">Category</label>
              <input
                type="text"
                id="editCategory"
                name="editCategory"
                required
              />

              <label for="editPrice">Price</label>
              <input
                type="number"
                step="0.01"
                id="editPrice"
                name="editPrice"
                required
              />

              <label for="editStock">Stock</label>
              <input type="number" id="editStock" name="editStock" required />

              <!-- Item Image -->
              <label>Item Image</label>
              <img
                src="../assets/default.png"
                alt="Item Image"
                class="image-preview"
                id="editImagePreview"
              />
              <div class="btn-group">
                <button type="button" id="removeImageBtn">Remove Image</button>
                <button type="button" id="uploadImageBtn">
                  Upload New Image
                </button>
              </div>

              <!-- Save / Cancel / Delete -->
              <div class="btn-group">
                <button type="submit">Save Changes</button>
                <button type="button" class="cancel-btn" id="cancelEditBtn">
                  Cancel
                </button>
                <button type="button" class="delete-btn" id="deleteBtn">
                  Delete
                </button>
              </div>
            </form>
          </div>
        </main>
      </main>
    </aside>

    <aside class="layer" id="edit-item">
      <header class="header header-page">
        <div class="actions left">
          <button class="btn btn-secondary layer-close" title="Close Panel">
            <i class="bx bxs-dock-right-arrow btn-icon"></i>
          </button>
        </div>
        <div class="context">
          <h1>Edit Item</h1>
        </div>
        <div class="actions right">
          <button
            onclick="parent.navigate(event, '../pages/branch/activity.html')"
            class="btn btn-primary"
            title="Di ko na alam"
          >
            <i class="bx bxs-user-plus btn-icon"></i>
          </button>
        </div>
      </header>

      <main class="main-container main-scrollable">
        <main class="main">Meow</main>
      </main>
    </aside>
  </body>
</html>
