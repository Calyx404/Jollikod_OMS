<!DOCTYPE html>
<html>
  <head>
    <title>Jollikod Backend Test</title>
  </head>
  <body>
    <h1>Jollikod Backend Test</h1>

    <!-- Branch Registration -->
    <h2>Register Branch</h2>
    <input type="text" id="reg_name" placeholder="Branch Name" />
    <input type="email" id="reg_email" placeholder="Email" />
    <input type="password" id="reg_pass" placeholder="Password" />
    <input type="text" id="reg_phone" placeholder="Contact Number" />
    <input type="text" id="reg_address" placeholder="Address" />
    <button onclick="registerBranch()">Register Branch</button>

    <!-- Branch Login -->
    <h2>Login Branch</h2>
    <input type="email" id="login_email" placeholder="Email" />
    <input type="password" id="login_pass" placeholder="Password" />
    <button onclick="loginBranch()">Login</button>

    <!-- Get Branch Info -->
    <h2>Branch Info</h2>
    <button onclick="getBranchInfo()">Get Info</button>
    <pre id="branch_info"></pre>

    <!-- Update Branch -->
    <h2>Update Branch</h2>
    <input type="text" id="upd_name" placeholder="Branch Name" />
    <input type="text" id="upd_phone" placeholder="Contact Number" />
    <input type="text" id="upd_address" placeholder="Address" />
    <button onclick="updateBranch()">Update Branch</button>

    <!-- Menu Actions -->
    <h2>Menu Actions</h2>
    <button onclick="createMenu()">Create Menu</button>

    <h3>Add Category</h3>
    <input type="text" id="cat_name" placeholder="Category Name" />
    <button onclick="addCategory()">Add Category</button>

    <h3>Add Menu Item</h3>
    <input type="number" id="menu_id" placeholder="Menu ID" />
    <input type="number" id="cat_id" placeholder="Category ID" />
    <input type="text" id="item_name" placeholder="Item Name" />
    <input type="text" id="item_desc" placeholder="Description" />
    <input type="number" id="item_price" placeholder="Price" />
    <input type="number" id="item_stock" placeholder="Stock Quantity" />
    <button onclick="addMenuItem()">Add Item</button>

    <h3>Update Menu Item</h3>
    <input type="number" id="upd_item_id" placeholder="Item ID" />
    <input type="text" id="upd_item_name" placeholder="Item Name" />
    <input type="text" id="upd_item_desc" placeholder="Description" />
    <input type="number" id="upd_item_price" placeholder="Price" />
    <input type="number" id="upd_item_stock" placeholder="Stock Quantity" />
    <button onclick="updateMenuItem()">Update Item</button>

    <h3>Delete Menu Item</h3>
    <input type="number" id="del_item_id" placeholder="Item ID" />
    <button onclick="deleteMenuItem()">Delete Item</button>

    <h3>Get Menu</h3>
    <button onclick="getMenu()">Get Menu</button>
    <pre id="menu_output"></pre>

    <script>
      const BASE_URL = "http://localhost/Jollikod_OMS/backend/routes/api.php";

      function registerBranch() {
        fetch(BASE_URL + "/auth/branch/register", {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify({
            branch_name: document.getElementById("reg_name").value,
            email: document.getElementById("reg_email").value,
            password: document.getElementById("reg_pass").value,
            contact_number: document.getElementById("reg_phone").value,
            address: document.getElementById("reg_address").value,
          }),
          credentials: "include",
        })
          .then((res) => res.json())
          .then(console.log)
          .catch(console.error);
      }

      function loginBranch() {
        fetch(BASE_URL + "/auth/login", {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify({
            email: document.getElementById("login_email").value,
            password: document.getElementById("login_pass").value,
            role: "branch",
          }),
          credentials: "include",
        })
          .then((res) => res.json())
          .then(console.log)
          .catch(console.error);
      }

      function getBranchInfo() {
        fetch(BASE_URL + "/branch/info", {
          method: "GET",
          credentials: "include",
        })
          .then((res) => res.json())
          .then(
            (data) =>
              (document.getElementById("branch_info").innerText =
                JSON.stringify(data, null, 2))
          )
          .catch(console.error);
      }

      function updateBranch() {
        fetch(BASE_URL + "/branch/update", {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify({
            branch_name: document.getElementById("upd_name").value,
            contact_number: document.getElementById("upd_phone").value,
            address: document.getElementById("upd_address").value,
          }),
          credentials: "include",
        })
          .then((res) => res.json())
          .then(console.log)
          .catch(console.error);
      }

      function createMenu() {
        fetch(BASE_URL + "/branch/menu/create", {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify({}),
          credentials: "include",
        })
          .then((res) => res.json())
          .then(console.log)
          .catch(console.error);
      }

      function addCategory() {
        fetch(BASE_URL + "/branch/category/add", {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify({
            category_name: document.getElementById("cat_name").value,
          }),
          credentials: "include",
        })
          .then((res) => res.json())
          .then(console.log)
          .catch(console.error);
      }

      function addMenuItem() {
        fetch(BASE_URL + "/branch/item/add", {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify({
            menu_id: Number(document.getElementById("menu_id").value),
            category_id: Number(document.getElementById("cat_id").value),
            item_name: document.getElementById("item_name").value,
            description: document.getElementById("item_desc").value,
            price: Number(document.getElementById("item_price").value),
            stock_quantity: Number(document.getElementById("item_stock").value),
          }),
          credentials: "include",
        })
          .then((res) => res.json())
          .then(console.log)
          .catch(console.error);
      }

      function updateMenuItem() {
        fetch(BASE_URL + "/branch/item/update", {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify({
            item_id: Number(document.getElementById("upd_item_id").value),
            item_name: document.getElementById("upd_item_name").value,
            description: document.getElementById("upd_item_desc").value,
            price: Number(document.getElementById("upd_item_price").value),
            stock_quantity: Number(
              document.getElementById("upd_item_stock").value
            ),
          }),
          credentials: "include",
        })
          .then((res) => res.json())
          .then(console.log)
          .catch(console.error);
      }

      function deleteMenuItem() {
        fetch(BASE_URL + "/branch/item/delete", {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify({
            item_id: Number(document.getElementById("del_item_id").value),
          }),
          credentials: "include",
        })
          .then((res) => res.json())
          .then(console.log)
          .catch(console.error);
      }

      function getMenu() {
        fetch(BASE_URL + "/branch/menu", {
          method: "GET",
          credentials: "include",
        })
          .then((res) => res.json())
          .then(
            (data) =>
              (document.getElementById("menu_output").innerText =
                JSON.stringify(data, null, 2))
          )
          .catch(console.error);
      }
    </script>
  </body>
</html>
